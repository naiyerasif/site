---
slug: "2020/06/27/api-documentation-with-springdoc-openapi"
title: "API documentation with springdoc-openapi"
description: "Springdoc is an open-source project that adds support for OpenAPI Specification 3 (OAS 3) in a Spring Boot application. Learn how to use Springdoc with a reactive Spring Boot project."
date: 2020-06-27 00:30:07
update: 2023-11-25 15:56:50
category: "guide"
---

[OpenAPI Initiative](https://www.openapis.org/) is a widely adopted industry standard to describe and document API, with [Swagger](https://swagger.io/) being one of its most well-known implementations. [springdoc-openapi](https://springdoc.org/) is an actively maintained integration for Spring Boot applications to quickly generate and publish OpenAPI documentation. In this post, we'll explore how we can use Springdoc with a Spring Boot project.

:::setup
The code written for this post uses:

- Java 21
- Spring Boot 3.2.0
- springdoc-openapi 2.2.0
- Postgres 16
- Maven 3.9.5
:::

Grab a sample Spring Boot application from [here](https://github.com/Microflash/guides/tree/main/%40sample/spring/springboot3-notes-api) to get started. It has a ready to use REST API exposed through the `NotesRestController` which we'll enhance gradually for a better OpenAPI integration.

Bring up an instance of Postgres using Docker with the following `Compose` file (available in the preceding code sample).

```yaml caption='compose.yml'
services:
  postgres:
    image: postgres:16-alpine
    ports:
      - 5432:5432
    environment:
      POSTGRES_USER: gwen
      POSTGRES_PASSWORD: stacy
      POSTGRES_DB: brooklyn
```

Run the following command to launch the container.

```sh prompt{1}
docker compose up -d
```

To begin with, open `pom.xml` and add the `springdoc-openapi-starter-webmvc-ui` dependency. This starter will enable the OpenAPI integration automatically.

```xml {37-41} caption='pom.xml'
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
				 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
				 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-parent</artifactId>
		<version>3.2.0</version>
		<relativePath/> <!-- lookup parent from repository -->
	</parent>

	<groupId>com.example</groupId>
	<artifactId>springboot3-springdoc-integration</artifactId>
	<version>2.0.0</version>

	<properties>
		<java.version>21</java.version>
	</properties>

	<dependencies>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-web</artifactId>
		</dependency>

		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-data-jdbc</artifactId>
		</dependency>
		<dependency>
			<groupId>org.postgresql</groupId>
			<artifactId>postgresql</artifactId>
			<scope>runtime</scope>
		</dependency>

		<dependency>
			<groupId>org.springdoc</groupId>
			<artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
			<version>2.2.0</version>
		</dependency>

		<dependency>
			<groupId>org.projectlombok</groupId>
			<artifactId>lombok</artifactId>
			<optional>true</optional>
		</dependency>
	</dependencies>

	<build>
		<plugins>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
				<configuration>
					<excludes>
						<exclude>
							<groupId>org.projectlombok</groupId>
							<artifactId>lombok</artifactId>
						</exclude>
					</excludes>
				</configuration>
			</plugin>
		</plugins>
	</build>

</project>
```

Launch the application with `Launcher` and navigate to <http://localhost:8080/swagger-ui.html>. You should see the default Swagger UI.

:::figure
![Default Swagger UI without any customization](/images/post/2020/2020-06-27-00-30-07-api-documentation-with-springdoc-openapi-01.png)

Default Swagger UI generated by springdoc-openapi without any customization
:::

## Adding description to the endpoints

You can improve the default UI by adding description to the endpoint with the `@Operation` annotation. To describe the controller, you can use `@Tag` annotation.

```java {3,4,15,24,32,38,44,50}
package com.example.springdoc.adapter.web;

import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.tags.Tag;
import lombok.RequiredArgsConstructor;
import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.UUID;

@RestController
@RequestMapping(NotesRestController.CONTEXT)
@Tag(name = NotesRestController.CONTEXT, description = "Operations to manage notes")
@RequiredArgsConstructor
public class NotesRestController {

	static final String CONTEXT = "/v1/notes";

	private final NoteService noteService;

	@GetMapping
	@Operation(summary = "Returns a list of notes for a list of ids")
	public List<NoteWebView> query(@RequestParam Optional<List<UUID>> id) {
		return id.isPresent() && !id.get().isEmpty() ?
				noteService.queryByIds(id.get()) :
				noteService.queryAll();
	}

	@PutMapping
	@Operation(summary = "Creates a new note")
	public Optional<NoteWebView> createNewNote(@RequestBody NoteWebView note) {
		return noteService.create(note);
	}

	@PostMapping(consumes = MediaType.MULTIPART_FORM_DATA_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)
	@Operation(summary = "Creates a new note from the uploaded markdown file")
	public Optional<NoteWebView> uploadNewNote(@ModelAttribute NoteFileView note) {
		return noteService.create(note);
	}

	@PatchMapping
	@Operation(summary = "Patches an existing note")
	public Optional<NoteWebView> editNote(@RequestBody NoteWebView note) {
		return noteService.edit(note);
	}

	@DeleteMapping("/{ids}")
	@Operation(summary = "Deletes notes for a list of ids")
	public List<NoteWebView> deleteNotesById(@PathVariable List<UUID> ids) {
		return noteService.deleteByIds(ids);
	}
}
```

If you reload <http://localhost:8080/swagger-ui.html> after application restart, you'd notice the descriptions appearing on Swagger UI. This is a good way to offer some context about your API.

:::figure
![Swagger UI with endpoint descriptions](/images/post/2020/2020-06-27-00-30-07-api-documentation-with-springdoc-openapi-02.png)

Swagger UI with endpoint descriptions specified with @Operation annotation
:::

You'd notice that Swagger UI is still showing the document title as **OpenAPI definition** with a placeholder version **v0**. Let's see how we can customize these details.

## Customizing OpenAPI document information

To customize the document information, you can inject a custom `OpenAPI` bean and pass your configuration to overwrite the Springdoc defaults. Let's declare a `@ConfigurationProperties` record which will pick our configuration from `application.yml`.

```java
package com.example.springdoc;

import io.swagger.v3.oas.models.OpenAPI;
import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties("openapi")
public class OpenAPIProperties extends OpenAPI {
}
```

> Note that we're inheriting `OpenAPI` class here. This will give us flexibility to customize Swagger UI purely through declarative configuration in `application.yml` instead of writing Java code.

Now, we'll inject an `OpenAPI` bean manually with the following `@Configuration`.

```java {9}
package com.example.springdoc;

import io.swagger.v3.oas.models.OpenAPI;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@EnableConfigurationProperties(OpenAPIProperties.class)
public class OpenAPIConfiguration {

	@Bean
	public OpenAPI openAPI(OpenAPIProperties openAPIProperties) {
		return openAPIProperties;
	}
}
```

Now, open `application.yml` and add the following configuration to customize the document information.

```yaml {8-15} caption='application.yml'
spring:
  datasource:
    password: stacy
    username: gwen
    url: jdbc:postgresql://localhost:5432/brooklyn
  sql.init.mode: always

openapi:
  info:
    title: "Notes API"
    description: "A demo of Springdoc integration with custom configuration"
    version: "@project.version@"
    license:
      name: MIT
      url: "https://opensource.org/licenses/MIT"
```

> Note that Spring will [automatically expand](https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.properties-and-configuration.expand-properties.maven) the `@project.version@` to the version specified in `pom.xml`.

Restart the application and reload <http://localhost:8080/swagger-ui.html>. You'd notice that our custom document information appearing on UI.

:::figure
![Swagger UI with customized document information](/images/post/2020/2020-06-27-00-30-07-api-documentation-with-springdoc-openapi-03.png)

Swagger UI with customized document information using Info API
:::

Since `OpenAPIProperties` allows you to control the `OpenAPI` object directly through `application.yml`, you can do a lot by just declaring the configuration.

## Adding bearer tokens to requests

One common usecase is to add a bearer token before calling an API. You can customize Swagger UI to allow you to configure a Bearer token once and use it in next requests automatically.

Here's an example for to support adding a bearer token. Open `src/main/resources/application.yml` and add the highlighted configuration.

```yaml {16-24} caption='application.yml'
spring:
  datasource:
    password: stacy
    username: gwen
    url: jdbc:postgresql://localhost:5432/brooklyn
  sql.init.mode: always

openapi:
  info:
    title: "Notes API"
    description: "A demo of Springdoc integration with custom configuration"
    version: "@project.version@"
    license:
      name: MIT
      url: "https://opensource.org/licenses/MIT"
  security:
    - BearerToken:
  components:
    security-schemes:
      BearerToken:
        name: BearerToken
        type: HTTP
        scheme: bearer
        bearer-format: JWT
```

After the application restart, when you reload <http://localhost:8080/swagger-ui.html>, you'd notice an Authorize button on the right.

:::figure
![Swagger UI with Authorize button to add a bearer token](/images/post/2020/2020-06-27-00-30-07-api-documentation-with-springdoc-openapi-04.png)

Swagger UI with Authorize button to add a bearer token (on top right and against every endpoint)
:::

When you click the Authorize button, you'd get a dialog to enter a token.

:::figure
![Swagger UI dialog to enter a bearer token](/images/post/2020/2020-06-27-00-30-07-api-documentation-with-springdoc-openapi-05.png)

Swagger UI dialog to save a bearer token which is used for subsequent API requests
:::

Once you've added a token, it'll be automatically sent with next request through the Swagger UI.

:::figure
![An API response with Authorization header](/images/post/2020/2020-06-27-00-30-07-api-documentation-with-springdoc-openapi-06.png)

An example API request with automatically attached Authorization header
:::

You can inspect [`io.swagger.v3.oas.models.OpenAPI`](https://github.com/swagger-api/swagger-core/blob/master/modules/swagger-models/src/main/java/io/swagger/v3/oas/models/OpenAPI.java) class to explore other configuration possibilities.

---

**Previous versions**

- [:time{datetime="2020-06-27T00:30:07.000Z"}](/archive/2020/06/27/api-documentation-with-springdoc-openapi--1/): Discusses Springdoc integration with Spring Boot 2 and Java 14

**Source code**

- [springboot3-springdoc-integration](https://github.com/Microflash/guides/tree/main/spring/springboot3-springdoc-integration)

**Related**

- [Springdoc documentation](https://springdoc.org/)
