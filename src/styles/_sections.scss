@use "./mixins";

body > :where(.header, .hero, .main, .sidekick) {
	padding-inline: var(--gap-site-body);
}

main {
	padding-block: var(--gap-site-base);
}

.header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding-block: calc(2rem + 1vw);
}

.navbar-primary {
	display: flex;
	align-items: center;

	& > *:not(:last-child) {
		margin-inline-end: 0.5ch;
	}

	.brand {
		--logo-size: calc(30px + 0.5vw);
		inline-size: var(--logo-size);
		flex-shrink: 0;

		img {
			border-radius: 0;
		}
	}

	.breadcrumb-separator-ltr {
		opacity: 0.6;
	}
}

.navbar-normal {
	display: flex;
	align-items: center;

	& > a {
		padding-inline: 0.8ch;
	}

	@include mixins.window-small {
		display: none;
	}
}

.navbar-secondary {
	display: flex;
	align-items: center;
}

.navbar-small {
	display: flex;
	align-items: center;
	justify-content: space-between;
	position: fixed;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 10;
	padding: 1ch var(--gap-site-body);
	backdrop-filter: blur(25px);
	max-inline-size: var(--max-width-site-base);
	margin-inline: auto;

	::part(button),
	.button-link {
		padding: 0;
		background-color: transparent;
		outline-color: transparent;
	}

	@include mixins.window-normal {
		display: none;
	}
}

.floating-back-to-top {
	display: none;
	border-radius: var(--radius-site-icon);

	@include mixins.window-normal {
		display: flex;
		position: fixed;
		inset-block-end: 1.5rem;
		inset-inline-end: 1.5rem;
		z-index: 10;
		backdrop-filter: blur(25px);
	}
}

.hero {
	padding-block: var(--gap-site-medium);

	&-profile {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 3ch;

		@include mixins.window-normal {
			justify-content: center;
		}

		img {
			--hero-image-size: calc(48px + 6vw);
			inline-size: var(--hero-image-size);
			border-radius: var(--radius-site-round);
			border: var(--thickness-site-hr) solid var(--border-site-body);
			box-shadow: 0 0 2rem var(--border-site-body);
		}
	}
}

.card {
	padding: var(--gap-site-body);
	border-radius: var(--radius-site-base);

	&-details {
		display: flex;
		align-items: center;
		color: var(--color-site-subtle);
		font-size: var(--text-site-small);

		& > *:not(:last-child) {
			margin-inline-end: 1ch;
		}

		.divider {
			margin: 0;
			flex-grow: 1;
		}
	}

	&-details + &-header {
		margin-block-start: 0.5ch;
		margin-block-end: 1ch;
	}

	&-details + &-body {
		margin-block-start: 1ch;
	}

	&-header {
		font-size: var(--text-site-subheadline);
		font-weight: var(--font-weight-site-medium);
	}

	&-body {
		font-size: var(--text-site-small);
	}

	&.status {
		overflow: auto;

		.card-body {
			font-size: var(--text-site-base);

			& > * + * {
				margin-block-start: var(--gap-site-small);
			}

			.highlight:not(:last-child) {
				margin-block-end: var(--gap-site-small);
			}
		}
	}

	&-category {
		text-transform: capitalize;
		color: var(--color-site-base);
	}

	&[onclick]:is(:focus, :focus-within, :hover, :active) {
		.card-category,
		.card-body {
			color: var(--color-site-stress);
		}
	
		.card-details {
			color: var(--color-site-base);
		}
	}
}

.footer {
	position: sticky;
	top: 100vh;
	padding-block: var(--gap-site-large);
	display: flex;
	flex-wrap: wrap;
	align-items: flex-end;

	& > * {
		flex: 1 1 100%;
		padding: var(--gap-site-small) var(--gap-site-body);

		@include mixins.window-normal {
			flex-basis: 40%;
		}
	}

	.stress.tagline {
		font-size: 1.5rem;
	}

	.with-icon-ltr:first-of-type {
		margin-block-start: 1ch;
	}

	&-copyright {
		font-size: var(--text-site-small);

		@include mixins.window-normal {
			text-align: end;
		}
	}

	&-links > *:not(:last-child) {
		margin-inline-end: 1ch;
	}
}

.glitch {
	place-content: center;
	text-align: center;

	&-container {
		--glitch-image-size: calc(10rem + 15vw);
		inline-size: var(--glitch-image-size);
		block-size: var(--glitch-image-size);
		display: flex;
		align-items: center;
		margin-inline: auto;

		img {
			filter: drop-shadow(0 0 5rem var(--border-site-deter));

			@media (prefers-reduced-motion: no-preference) {
				animation: flicker 5s linear infinite;
			}
		}
	}
}

@keyframes flicker {
	0%, 19.999%, 22%, 62.999%, 64%, 64.999%, 70%, 100% {
		opacity: .99;
		
	}
	20%, 21.999%, 63%, 63.999%, 65%, 69.999% {
		opacity: 0.4;
	}
}
