@use "sass:color";
@use "mixins";
@use "colors" as *;

@mixin lightTheme {
	color-scheme: light;

	--y-accent-color: #{$x-light-primary-45};
	--y-strong-accent-color: #{$x-light-primary-35};
	--y-decoration-color: #{color.change($x-light-primary-85, $chroma: 12%, $space: oklch)};
	--y-strong-decoration-color: #{color.change($x-light-primary-75, $chroma: 12%, $space: oklch)};
	--y-body-color: #{$x-light-neutral-20};
	--y-emphasis-color: #{$x-light-neutral-7};
	--y-feeble-color: #{$x-light-neutral-40};
	--y-note-color: #{$x-light-neutral-35};
	--y-commend-color: #{$x-light-commend-35};
	--y-deter-color: #{$x-light-deter-35};
	--y-warn-color: #{$x-light-warn-35};
	--y-assert-color: #{$x-light-assert-35};

	--y-accent-bg-color: #{color.change($x-light-primary-95, $chroma: 12%, $space: oklch)};
	--y-strong-accent-bg-color: #{color.change($x-light-primary-93, $chroma: 12%, $space: oklch)};
	--y-body-bg-color: #{$x-light-neutral-99};
	--y-note-bg-color: #{$x-light-neutral-97};
	--y-commend-bg-color: #{$x-light-commend-98};
	--y-deter-bg-color: #{$x-light-deter-97};
	--y-warn-bg-color: #{$x-light-warn-97};
	--y-assert-bg-color: #{$x-light-assert-97};
	--y-selection-bg-color: #{color.change($x-light-warn-80, $alpha: 0.4, $space: oklch)};

	--y-note-canvas-color: #{$x-light-neutral-93};
	--y-commend-canvas-color: #{$x-light-commend-95};
	--y-deter-canvas-color: #{$x-light-deter-93};
	--y-warn-canvas-color: #{$x-light-warn-93};
	--y-assert-canvas-color: #{$x-light-assert-93};

	--y-body-border: #{$x-light-neutral-80};
	--y-note-border: var(--y-body-border);
	--y-commend-border: #{$x-light-commend-80};
	--y-deter-border: #{$x-light-deter-80};
	--y-warn-border: #{$x-light-warn-80};
	--y-assert-border: #{$x-light-assert-80};

	--x-texture-fx-1: hsla(0, 0%, 0%, 0.02);
	--x-texture-fx-2: hsla(0, 0%, 100%, 0);
	--x-texture-fx-3: hsla(0, 0%, 100%, 0.5);

	--color-prettylights-syntax-brackethighlighter-angle: #59636e;
	--color-prettylights-syntax-brackethighlighter-unmatched: #82071e;
	--color-prettylights-syntax-carriage-return-bg: #cf222e;
	--color-prettylights-syntax-carriage-return-text: #f6f8fa;
	--color-prettylights-syntax-comment: #59636e;
	--color-prettylights-syntax-constant: #0550ae;
	--color-prettylights-syntax-constant-other-reference-link: #0a3069;
	--color-prettylights-syntax-entity: #6639ba;
	--color-prettylights-syntax-entity-tag: #0550ae;
	--color-prettylights-syntax-invalid-illegal-bg: #82071e;
	--color-prettylights-syntax-invalid-illegal-text: #f6f8fa;
	--color-prettylights-syntax-keyword: #cf222e;
	--color-prettylights-syntax-markup-changed-bg: #ffd8b5;
	--color-prettylights-syntax-markup-changed-text: #953800;
	--color-prettylights-syntax-markup-deleted-bg: #ffebe9;
	--color-prettylights-syntax-markup-deleted-text: #82071e;
	--color-prettylights-syntax-markup-heading: #0550ae;
	--color-prettylights-syntax-markup-ignored-bg: #0550ae;
	--color-prettylights-syntax-markup-ignored-text: #d1d9e0;
	--color-prettylights-syntax-markup-inserted-bg: #dafbe1;
	--color-prettylights-syntax-markup-inserted-text: #116329;
	--color-prettylights-syntax-markup-list: #3b2300;
	--color-prettylights-syntax-meta-diff-range: #8250df;
	--color-prettylights-syntax-string: #0a3069;
	--color-prettylights-syntax-string-regexp: #116329;
	--color-prettylights-syntax-sublimelinter-gutter-mark: #818b98;
	--color-prettylights-syntax-variable: #953800;
	--color-prettylights-syntax-markup-bold: #1f2328;
	--color-prettylights-syntax-markup-italic: #1f2328;
	--color-prettylights-syntax-storage-modifier-import: #1f2328;
}

@mixin darkTheme {
	color-scheme: dark;

	--y-accent-color: #{$x-dark-primary-80};
	--y-strong-accent-color: #{$x-dark-primary-90};
	--y-decoration-color: #{$x-dark-primary-40};
	--y-strong-decoration-color: #{$x-dark-primary-55};
	--y-body-color: #{$x-dark-neutral-80};
	--y-emphasis-color: #{$x-dark-neutral-90};
	--y-feeble-color: #{$x-dark-neutral-70};
	--y-note-color: #{$x-dark-neutral-75};
	--y-commend-color: #{$x-dark-commend-75};
	--y-deter-color: #{$x-dark-deter-75};
	--y-warn-color: #{$x-dark-warn-75};
	--y-assert-color: #{$x-dark-assert-75};

	--y-accent-bg-color: #{$x-dark-primary-20};
	--y-strong-accent-bg-color: #{$x-dark-primary-25};
	--y-body-bg-color: #{$x-dark-neutral-5};
	--y-note-bg-color: #{$x-dark-neutral-10};
	--y-commend-bg-color: #{$x-dark-commend-10};
	--y-deter-bg-color: #{$x-dark-deter-10};
	--y-warn-bg-color: #{$x-dark-warn-10};
	--y-assert-bg-color: #{$x-dark-assert-10};
	--y-selection-bg-color: #{color.change($x-dark-warn-50, $alpha: 0.4, $space: oklch)};

	--y-note-canvas-color: #{$x-dark-neutral-20};
	--y-commend-canvas-color: #{$x-dark-commend-20};
	--y-deter-canvas-color: #{$x-dark-deter-20};
	--y-warn-canvas-color: #{$x-dark-warn-20};
	--y-assert-canvas-color: #{$x-dark-assert-20};

	--y-body-border: #{$x-dark-neutral-35};
	--y-note-border: var(--y-body-border);
	--y-commend-border: #{$x-dark-commend-35};
	--y-deter-border: #{$x-dark-deter-35};
	--y-warn-border: #{$x-dark-warn-35};
	--y-assert-border: #{$x-dark-assert-35};

	--x-texture-fx-1: hsla(0, 0%, 0%, 0);
	--x-texture-fx-2: hsla(0, 0%, 100%, 0);
	--x-texture-fx-3: hsla(0, 0%, 100%, 0.1);

	--color-prettylights-syntax-brackethighlighter-angle: #9198a1;
	--color-prettylights-syntax-brackethighlighter-unmatched: #f85149;
	--color-prettylights-syntax-carriage-return-bg: #b62324;
	--color-prettylights-syntax-carriage-return-text: #f0f6fc;
	--color-prettylights-syntax-comment: #9198a1;
	--color-prettylights-syntax-constant: #79c0ff;
	--color-prettylights-syntax-constant-other-reference-link: #a5d6ff;
	--color-prettylights-syntax-entity: #d2a8ff;
	--color-prettylights-syntax-entity-tag: #7ee787;
	--color-prettylights-syntax-invalid-illegal-bg: #8e1519;
	--color-prettylights-syntax-invalid-illegal-text: #f0f6fc;
	--color-prettylights-syntax-keyword: #ff7b72;
	--color-prettylights-syntax-markup-bold: #f0f6fc;
	--color-prettylights-syntax-markup-changed-bg: #5a1e02;
	--color-prettylights-syntax-markup-changed-text: #ffdfb6;
	--color-prettylights-syntax-markup-deleted-bg: #67060c;
	--color-prettylights-syntax-markup-deleted-text: #ffdcd7;
	--color-prettylights-syntax-markup-heading: #1f6feb;
	--color-prettylights-syntax-markup-ignored-bg: #1158c7;
	--color-prettylights-syntax-markup-ignored-text: #f0f6fc;
	--color-prettylights-syntax-markup-inserted-bg: #033a16;
	--color-prettylights-syntax-markup-inserted-text: #aff5b4;
	--color-prettylights-syntax-markup-italic: #f0f6fc;
	--color-prettylights-syntax-markup-list: #f2cc60;
	--color-prettylights-syntax-meta-diff-range: #d2a8ff;
	--color-prettylights-syntax-storage-modifier-import: #f0f6fc;
	--color-prettylights-syntax-string: #a5d6ff;
	--color-prettylights-syntax-string-regexp: #7ee787;
	--color-prettylights-syntax-sublimelinter-gutter-mark: #3d444d;
	--color-prettylights-syntax-variable: #ffa657;
}

:root:not([data-theme]),
[data-theme="light"] {
	@include lightTheme;
}

@include mixins.whenDark {
	:root:not([data-theme]) {
		@include darkTheme;
	}
}

[data-theme="dark"] {
	@include darkTheme;
}

:root {
	// layout
	--y-body-width: 65rem;
	--y-post-width: 60ch;
	--y-feature-width: 75rem;
	--y-body-gap: 24px;
	--x-gap-root: calc(2rem + 2vw);
	--x-gap-md: calc(3rem + 3vw);
	--x-gap-lg: calc(4rem + 4vw);

	// typography
	--x-regular-text: 400;
	--x-semibold-text: 600;
	--x-black-text: 900;
	--y-regular-text: var(--x-regular-text);
	--y-emphasized-text: var(--x-semibold-text);
	--y-strongly-emphasized-text: var(--x-black-text);

	// themed properties for customization
	--y-theme-color: var(--y-note-color);
	--y-theme-bg-color: var(--y-note-bg-color);
	--y-theme-canvas-color: var(--y-note-canvas-color);
	--y-theme-border: var(--y-note-border);
	--y-theme-marker-color: var(--y-note-border);

	// color
	--y-caption-color: var(--y-feeble-color);
	--y-link-color: var(--y-accent-color);
	--y-button-color: var(--y-link-color);
	--y-link-decoration-color: var(--y-decoration-color);
	--y-mark-color: var(--y-warn-color);
	--y-hl-line-prompt-color: #{$x4-color-deter-50};

	// background
	--y-code-bg-color: var(--y-note-canvas-color);
	--y-form-bg-color: var(--y-note-bg-color);
	--y-mark-bg-color: var(--y-warn-canvas-color);

	// border
	--x-radius-xs: 4px;
	--x-radius-sm: 8px;
	--x-radius-root: 1rem;
	--x-radius-max: 1e5px;
	--x-border-sm: 1px;
	--x-border-root: 2px;
	--y-media-radius: var(--x-radius-xs);
	--y-details-radius: var(--x-radius-sm);
	--y-form-radius: var(--x-radius-sm);
	--y-table-radius: var(--x-radius-sm);
	--y-form-border: var(--y-body-border);

	// transitions
	--y-transition-function: cubic-bezier(0.25, 0, 0.4, 1);

	@include mixins.withLinearTransitionTimingFunction {
		--y-transition-function: linear(0, 0.009, 0.035 2.1%, 0.141 4.4%, 0.723 12.9%, 0.938 16.7%, 1.017, 1.077, 1.121, 1.149 24.3%, 1.159, 1.163, 1.161, 1.154 29.9%, 1.129 32.8%, 1.051 39.6%, 1.017 43.1%, 0.991, 0.977 51%, 0.974 53.8%, 0.975 57.1%, 0.997 69.8%, 1.003 76.9%, 1);
	}
}

@include mixins.navigableElements {
	&:is(:focus, :focus-visible, :focus-within, :hover, :active) {
		--y-link-color: var(--y-strong-accent-color);
		--y-link-decoration-color: var(--y-strong-decoration-color);
	}
}

@include mixins.formElements {
	&:is(:focus, :focus-visible, :focus-within, :hover, :active) {
		--y-outline-color: var(--y-strong-accent-color);
		--y-form-border: var(--y-strong-decoration-color);
	}
}

@include mixins.buttonLikeElements {
	--y-form-bg-color: var(--y-accent-bg-color);
	--y-form-border: var(--y-decoration-color);

	&:is(:focus, :focus-visible, :focus-within, :hover, :active) {
		--y-button-color: var(--y-strong-accent-color);
		--y-form-bg-color: var(--y-strong-accent-bg-color);
		--y-form-border: var(--y-strong-decoration-color);
	}
}
