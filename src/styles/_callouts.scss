@use "mixins";

.callout {
	--calloutFg: var(--x3-fg-callout, var(--x3-fg-note));
	--calloutBg: var(--x3-bg-callout, var(--x3-bg-note));
	--calloutBorderWidth: var(--x3-border-width-sm);
	--calloutBorder: var(--calloutBorderWidth) solid var(--x3-border-callout, var(--x3-border-note));
	--calloutBorderRadius: var(--x3-radius-xs);
	
	border: var(--calloutBorder);
	border-radius: var(--calloutBorderRadius);

	&-indicator {
		--calloutIndicatorPadding: calc(var(--calloutBorderRadius) - var(--calloutBorderWidth));
		display: grid;
		grid-template-columns: auto minmax(0, 1fr);
		gap: 0.5ch;
		color: var(--calloutFg);
		background-color: var(--calloutBg);
		border-block-end: var(--calloutBorder);
		border-start-start-radius: var(--calloutIndicatorPadding);
		border-start-end-radius: var(--calloutIndicatorPadding);
		padding: 0.25rem 0.5rem 0.35rem;
		font-size: 0.9em;
		--x3-size-icon: 1.9775ch;
	}

	&-hint {
		display: flex;
		margin-block-start: 0.3ch;
		grid-column: 1;
	}

	&-title {
		grid-column: 2;
	}

	&-content {
		position: relative;
		padding: 1ch;

		&::before {
			content: "";
			position: absolute;
			@include mixins.size(100%);
			background-color: var(--calloutBg);
			border-radius: var(--x3-radius-max);
			filter: blur(5rem);
			z-index: -1;
			top: 0;
			left: 0;
			opacity: var(--x3-bg-callout-opacity);
		}

		&:first-child {
			color: var(--calloutFg);
		}
	}

	&-commend {
		--x3-fg-callout: var(--x3-fg-commend);
		--x3-bg-callout: var(--x3-bg-commend);
		--x3-border-callout: var(--x3-border-commend);
	}

	&-assert {
		--x3-fg-callout: var(--x3-fg-assert);
		--x3-bg-callout: var(--x3-bg-assert);
		--x3-border-callout: var(--x3-border-assert);
	}

	&-warn {
		--x3-fg-callout: var(--x3-fg-warn);
		--x3-bg-callout: var(--x3-bg-warn);
		--x3-border-callout: var(--x3-border-warn);
	}

	&-deter {
		--x3-fg-callout: var(--x3-fg-deter);
		--x3-bg-callout: var(--x3-bg-deter);
		--x3-border-callout: var(--x3-border-deter);
	}

	&.setup &-content {
		font-size: 0.9em;
		
		p + :where(ul, ol, dl),
		li {
			--x3-gap-flow: 0;
		}
	}
}
